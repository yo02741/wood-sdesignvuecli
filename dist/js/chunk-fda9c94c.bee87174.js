(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda9c94c"],{"99af":function(t,a,e){"use strict";var s=e("23e7"),n=e("d039"),o=e("e8b5"),i=e("861d"),r=e("7b0b"),c=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),p=e("b622"),m=e("2d00"),f=p("isConcatSpreadable"),v=9007199254740991,h="Maximum allowed index exceeded",g=m>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),C=u("concat"),b=function(t){if(!i(t))return!1;var a=t[f];return void 0!==a?!!a:o(t)},_=!g||!C;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,n,o,i=r(this),u=d(i,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(o=-1===a?i:arguments[a],b(o)){if(n=c(o.length),p+n>v)throw TypeError(h);for(e=0;e<n;e++,p++)e in o&&l(u,p,o[e])}else{if(p>=v)throw TypeError(h);l(u,p++,o)}return u.length=p,u}})},b789:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("loading",{attrs:{loader:"bars",color:"#86FFF8","background-color":"#B38C4D",active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"jumbotron jumbotron-fluid cartjumbotron"},[e("nav",{staticClass:"navbar navbar-expand-lg navClass py-3"},[e("h1",{attrs:{"data-aos":"fade-down","data-aos-easing":"linear","data-aos-duration":"500"}},[e("router-link",{staticClass:"navbar-brand text-white\n          font-weight-bold ml-4 logo",attrs:{to:"/"}},[t._v("木's design")])],1),t._m(0),e("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarSupportedContent","data-aos":"fade-down","data-aos-easing":"linear","data-aos-duration":"500"}},[e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link px-4 font-weight-bold",attrs:{to:"/aboutus"}},[t._v("關於我們")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link px-4 font-weight-bold",attrs:{to:"/sustainability"}},[t._v("永續經營")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link px-4 font-weight-bold",attrs:{to:"/products"}},[t._v("產品列表")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link px-4 font-weight-bold",attrs:{to:"/cart"}},[t._v("購物車")])],1)])])])]),e("div",{staticClass:"container py-5",staticStyle:{"min-height":"500px"}},[e("div",{staticClass:"row cartlist py-4 d-none",class:{"d-block":t.cart!=={}}},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-outline-danger my-3",on:{click:t.delProducts}},[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["fas","trash-alt"]}}),t._v(" 刪除所有商品 ")],1)]),e("table",{staticClass:"table table-hover"},[t._m(1),e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger\n                                btn-sm",on:{click:function(e){return t.delProduct(a.product.id)}}},[e("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["fas","trash-alt"]}})],1)]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-prepend"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(e){return t.changeQuantity(a.product.id,a.quantity-1)}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control text-center",attrs:{type:"number",disabled:""},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.changeQuantity(a.product.id,a.quantity+1)}}},[t._v(" +")])])])]),e("td",{staticClass:"align-middle text-center"},[t._v(t._s(a.product.price))]),e("td",{staticClass:"align-middle text-center"},[t._v(t._s(a.product.unit))])])})),0),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"3"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.coupon,expression:"form.coupon"}],staticClass:"form-control float-right text-right w-50",attrs:{type:"text",id:"coupon",name:"coupon",placeholder:"請輸入優惠券序號"},domProps:{value:t.form.coupon},on:{input:function(a){a.target.composing||t.$set(t.form,"coupon",a.target.value)}}})]),e("td",{attrs:{colspan:"2"}},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.searchCoupon}},[t._v("使用優惠券")])])]),0!==t.couponMoneySaved?e("tr",[t._m(2),e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[e("del",[t._v(t._s(t.cartTotal)+" 元")])])]):e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計：")]),e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v(t._s(t.cartTotal)+" 元")])]),0!==t.couponMoneySaved?e("tr",[e("td",{staticClass:"text-right text-secondary",attrs:{colspan:"3"}},[t._v("折扣：")]),e("td",{staticClass:"text-right text-secondary",attrs:{colspan:"2"}},[t._v(" - "+t._s(t.couponMoneySaved)+" 元")])]):t._e(),0!==t.couponMoneySaved?e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計：")]),e("td",{staticClass:"text-right text-danger h3",attrs:{colspan:"2"}},[t._v(" "+t._s(t.cartTotal-t.couponMoneySaved)+" 元")])]):t._e()])])])]),e("div",{staticClass:"row form py-4"},[e("div",{staticClass:"col-12 col-md-8 mx-auto"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,n=a.classes;return[e("label",{attrs:{for:"name"}},[t._v("收件人姓名")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:n,attrs:{id:"name",type:"text"},domProps:{value:t.form.name},on:{input:function(a){a.target.composing||t.$set(t.form,"name",a.target.value)}}}),s[0]?e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"email|required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,n=a.classes;return[e("label",{attrs:{for:"email"}},[t._v("信箱")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:n,attrs:{type:"email",name:"email",id:"email"},domProps:{value:t.form.email},on:{input:function(a){a.target.composing||t.$set(t.form,"email",a.target.value)}}}),s[0]?e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"min:8|required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,n=a.classes;return[e("label",{attrs:{for:"tel"}},[t._v("電話")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"form-control",class:n,attrs:{type:"tel",name:"tel",id:"tel"},domProps:{value:t.form.tel},on:{input:function(a){a.target.composing||t.$set(t.form,"tel",a.target.value)}}}),s[0]?e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,n=a.classes;return[e("label",{attrs:{for:"address"}},[t._v("地址")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",class:n,attrs:{type:"text",name:"address",id:"address"},domProps:{value:t.form.address},on:{input:function(a){a.target.composing||t.$set(t.form,"address",a.target.value)}}}),s[0]?e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,n=a.classes;return[e("label",{attrs:{for:"payment"}},[t._v("購買方式")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment,expression:"form.payment"}],staticClass:"form-control",class:n,attrs:{name:"payment",id:"payment"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("請輸入付款方式")]),t._l(t.payment,(function(a,s){return e("option",{key:s,domProps:{value:a}},[t._v(t._s(a))])}))],2),s[0]?e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"message",id:"message"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s}},[t._v("送出訂單")])])])]}}])})],1)])]),e("div",{staticClass:"container-fluid footer bg-primary text-center"},[e("div",{staticClass:"container py-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-4 mb-md-0 d-flex flex-column\n                justify-content-center align-items-center"},[e("router-link",{staticClass:"h1 text-white font-weight-bold px-4 logo",attrs:{to:"/"}},[t._v("木's design")])],1),t._m(3),e("div",{staticClass:"col-md-4"},[e("ul",{staticClass:"d-flex justify-content-around  align-items-center mb-0 pl-0"},[e("li",[e("a",{staticClass:"icon",attrs:{href:"https://www.facebook.com/profile.php?id=100003064961458"}},[e("font-awesome-icon",{attrs:{icon:["fab","facebook"]}})],1)]),e("li",[e("a",{staticClass:"icon",attrs:{href:"https://www.instagram.com/8736.yo/"}},[e("font-awesome-icon",{attrs:{icon:["fab","instagram"]}})],1)]),e("li",[e("a",{staticClass:"icon",attrs:{href:"https://github.com/yo02741"}},[e("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)]),e("li",[e("a",{staticClass:"icon",attrs:{href:"https://codepen.io/yo02741"}},[e("font-awesome-icon",{attrs:{icon:["fab","codepen"]}})],1)])])])])])])],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{width:"75"}},[t._v("刪除")]),e("th",{attrs:{width:"350"}},[t._v("品名")]),e("th",{attrs:{width:"200"}},[t._v("數量")]),e("th",{staticClass:"text-center",attrs:{width:"75"}},[t._v("單價")]),e("th",{staticClass:"text-center",attrs:{width:"75"}},[t._v("單位")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[e("del",[t._v("總計：")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-4 mb-4 mb-md-0 d-flex flex-column\n                justify-content-center align-items-center"},[e("p",{staticClass:"text-white mb-0"},[t._v("Copyright © 2020 木's design")]),e("p",{staticClass:"text-white mb-0"},[t._v("純屬練習，不做商業行為。")]),e("p",{staticClass:"text-white mb-0"},[t._v("圖片來源：unsplash、pexels")])])}],o=(e("99af"),e("4160"),e("b64b"),e("159b"),{data:function(){return{isLoading:!1,cart:{},cartTotal:0,api:{uuid:"3f7b1d29-d350-4de5-92ca-9b0bdfb7ca45",apiPath:"https://course-ec-api.hexschool.io/"},payment:["WebATM","ATM","Barcode","Credit","ApplePay","GooglePay"],form:{name:"",email:"",tel:"",address:"",payment:"",message:"",coupon:""},couponPercent:0,couponMoneySaved:0}},methods:{getCart:function(){var t=this,a="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/shopping");this.isLoading=!0,this.$http.get(a).then((function(a){t.cartTotal=0,t.isLoading=!1,t.cart=a.data.data,t.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity})),0!==t.couponPercent&&(t.couponMoneySaved=t.cartTotal-parseInt(t.cartTotal/100*t.couponPercent,10))})).catch((function(a){t.isLoading=!1}))},changeQuantity:function(t,a){var e=this,s="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/shopping"),n={product:t,quantity:a};this.isLoading=!0,this.$http.patch(s,n).then((function(t){e.isLoading=!1,e.getCart()})).catch((function(t){e.isLoading=!1,e.getCart()}))},delProduct:function(t){var a=this,e="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/shopping/").concat(t);this.isLoading=!0,this.$http.delete(e).then((function(t){a.isLoading=!1,a.getCart()})).catch((function(t){a.isLoading=!1,a.getCart()}))},delProducts:function(){var t=this,a="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/shopping/all/product");this.isLoading=!0,this.$http.delete(a).then((function(a){t.isLoading=!1,t.getCart()})).catch((function(a){t.isLoading=!1,t.getCart()}))},searchCoupon:function(){var t=this;if(""===this.form.coupon)this.$swal.fire({icon:"error",title:"請輸入優惠券序號！",text:"",confirmButtonColor:"#B38C4D"}).then((function(a){a&&(t.form.coupon="",t.couponPercent=0,t.couponMoneySaved=0,t.getCart())}));else{var a="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/coupon/search");this.isLoading=!0,this.$http.post(a,{code:this.form.coupon}).then((function(a){t.isLoading=!1,t.couponPercent=a.data.data.percent,t.getCart()})).catch((function(a){t.isLoading=!1,t.$swal.fire({icon:"error",title:"無此優惠券代碼！",text:"請再確認一次",confirmButtonColor:"#B38C4D"}).then((function(a){a&&(t.form.coupon="",t.couponPercent=0,t.couponMoneySaved=0,t.getCart())}))}))}},createOrder:function(){var t=this;if(0===Object.keys(this.cart).length)this.$swal.fire({icon:"error",title:"您的購物車是空的喔！",text:"Let's Go Shopping！",confirmButtonColor:"#B38C4D"}).then((function(a){a&&t.$router.push("/products")}));else{var a="".concat(this.api.apiPath,"api/").concat(this.api.uuid,"/ec/orders");this.isLoading=!0,this.$http.post(a,this.form).then((function(a){t.isLoading=!1,t.couponPercent=a.data.data.percent,t.$swal.fire({icon:"success",title:"購物成功！",text:"謝謝您的光臨！",confirmButtonColor:"#B38C4D"}).then((function(a){a&&t.$router.push("/")}))})).catch((function(a){t.isLoading=!1,t.getCart()}))}}},created:function(){this.getCart()}}),i=o,r=e("2877"),c=Object(r["a"])(i,s,n,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-fda9c94c.bee87174.js.map